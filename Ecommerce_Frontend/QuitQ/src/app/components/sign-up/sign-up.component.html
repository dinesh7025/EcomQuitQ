<div class="session">
  <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()" class="sign-up" autocomplete="off">
    <h4>Join <span>QuitQ</span></h4>
    <p>Sign up to create your account</p>

    <!-- Step 1: User Details -->
    <div class="wizard-step" *ngIf="currentStep == 1">
      <div class="floating-label">
        <input placeholder="First Name" type="text" id="firstName" formControlName="firstName" autocomplete="off" required>
        <label for="firstName">First Name:</label>
        <div *ngIf="signUpForm.get('firstName')?.invalid && (signUpForm.get('firstName')?.touched || signUpForm.get('firstName')?.dirty)">
          <small style="color: red;">First Name is required!</small>
        </div>
      </div>
      <div class="floating-label">
        <input placeholder="Last Name" type="text" id="lastName" formControlName="lastName" autocomplete="off" required>
        <label for="lastName">Last Name:</label>
        <div *ngIf="signUpForm.get('lastName')?.invalid && (signUpForm.get('lastName')?.touched || signUpForm.get('lastName')?.dirty)">
          <small style="color: red;">Last Name is required!</small>
        </div>
      </div>
      <div class="floating-label">
        <input placeholder="Email" type="email" id="email" formControlName="email" autocomplete="off" required>
        <label for="email">Email:</label>
        <div *ngIf="signUpForm.get('email')?.invalid && (signUpForm.get('email')?.touched || signUpForm.get('email')?.dirty)">
          <small style="color: red;">Email is required!</small>
        </div>
      </div>
      <div class="floating-label">
        <input placeholder="Username" type="text" id="username" formControlName="username" autocomplete="off" required>
        <label for="username">Username:</label>
        <div *ngIf="signUpForm.get('username')?.invalid && (signUpForm.get('username')?.touched || signUpForm.get('username')?.dirty)">
          <small style="color: red;">Username is required!</small>
        </div>
      </div>
      <div class="floating-label">
        <input placeholder="Phone Number" type="text" id="phonenumber" formControlName="phonenumber" autocomplete="off" required>
        <label for="phonenumber">Phone Number:</label>
        <div *ngIf="signUpForm.get('phonenumber')?.invalid && (signUpForm.get('phonenumber')?.touched || signUpForm.get('phonenumber')?.dirty)">
          <small style="color: red;">Phone Number is required!</small>
        </div>
      </div>

      <button type="button" (click)="nextStep()" 
              [disabled]="!signUpForm.get('firstName')?.valid || 
                          !signUpForm.get('lastName')?.valid || 
                          !signUpForm.get('email')?.valid || 
                          !signUpForm.get('username')?.valid || 
                          !signUpForm.get('phonenumber')?.valid">
        Next
      </button>
    </div>

    <!-- Step 2: Address Details -->
    <div class="wizard-step" *ngIf="currentStep == 2">
      <h5>Address Details</h5>
      <div class="floating-label">
        <input placeholder="Line 1" type="text" id="addressLine1" formControlName="addressLine1" autocomplete="off">
        <label for="addressLine1">Address Line 1:</label>
        <div *ngIf="signUpForm.get('addressLine1')?.invalid && (signUpForm.get('addressLine1')?.touched || signUpForm.get('addressLine1')?.dirty)">
          <small style="color: red;">Address Line 1 is required!</small>
        </div>
      </div>
      <div class="floating-label">
        <input placeholder="Line 2" type="text" id="addressLine2" formControlName="addressLine2" autocomplete="off">
        <label for="addressLine2">Address Line 2:</label>
      </div>
      <div class="floating-label">
        <input placeholder="City" type="text" id="city" formControlName="city" autocomplete="off">
        <label for="city">City:</label>
        <div *ngIf="signUpForm.get('city')?.invalid && (signUpForm.get('city')?.touched || signUpForm.get('city')?.dirty)">
          <small style="color: red;">City is required!</small>
        </div>
      </div>
      <div class="floating-label">
        <input placeholder="State" type="text" id="state" formControlName="state" autocomplete="off">
        <label for="state">State:</label>
      </div>
      <div class="floating-label">
        <input placeholder="Country" type="text" id="country" formControlName="country" autocomplete="off">
        <label for="country">Country:</label>
        <div *ngIf="signUpForm.get('country')?.invalid && (signUpForm.get('country')?.touched || signUpForm.get('country')?.dirty)">
          <small style="color: red;">Country selection is required!</small>
        </div>
      </div>
      <div class="floating-label">
        <input placeholder="Postal Code" type="text" id="postalCode" formControlName="postalCode" autocomplete="off">
        <label for="postalCode">Postal Code:</label>
      </div>

      <button type="button" (click)="previousStep()">Previous</button>
      <button type="button" (click)="nextStep()" 
              [disabled]="!signUpForm.get('addressLine1')?.valid || 
                          !signUpForm.get('city')?.valid || 
                          !signUpForm.get('country')?.valid">
        Next
      </button>
    </div>

    <!-- Step 3: Password and Final Details -->
    <div class="wizard-step" *ngIf="currentStep == 3">
      <div class="floating-label">
        <input placeholder="Password" type="password" id="password" formControlName="password" autocomplete="off" required>
        <label for="password">Password:</label>
        <div *ngIf="signUpForm.get('password')?.invalid && (signUpForm.get('password')?.touched || signUpForm.get('password')?.dirty)">
          <small style="color: red;">Password is required!</small>
        </div>
      </div>
      <div class="floating-label">
        <input placeholder="Confirm Password" type="password" id="confirmPassword" formControlName="confirmPassword" autocomplete="off" required>
        <label for="confirmPassword">Confirm Password:</label>
        <div *ngIf="signUpForm.get('confirmPassword')?.hasError('mismatch')">
          <small style="color: red;">Passwords do not match!</small>
        </div>
      </div>
      <div class="floating-label">
        <input type="date" id="dob" formControlName="dob" autocomplete="off" required>
        <label for="dob">Date of Birth:</label>
      </div>
      <div class="floating-label">
        <select id="gender" formControlName="gender" required>
          <option value="" disabled selected>Select Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
        <label for="gender">Gender:</label>
        <div *ngIf="signUpForm.get('gender')?.invalid && (signUpForm.get('gender')?.touched || signUpForm.get('gender')?.dirty)">
          <small style="color: red;">Gender selection is required!</small>
        </div>
      </div>

      <button type="button" (click)="previousStep()">Previous</button>
      <button type="submit" [disabled]="!signUpForm.valid">Sign Up</button>
    </div>
  </form>
</div>
<app-footer></app-footer>
